
翻译论文探究基本理论阶段

参考论文:http://cgg.mff.cuni.cz/~jaroslav/papers/2008-sca-erosim/2008-sca-erosiom-fin.pdf

`基于水力侵蚀的交互式地形建模`

一、描述

即使基于二十年的机器图形学，想要建立真实的地形还是一个挑战。
真正的地形是通过无数次的冲刷圆润和建立起来的。地形的形状何可有很大
的差异，并且因为外部因素的影响会发生更多的变化，比如风、水、温度和
化学品的因素、时间等。最重要的地形影响因素肯定是水，因为它与土壤
相互作用，以水力侵蚀的形式出现。

在这项工作中，我们已经知道有一些有效的方法去建模，通过交互式的允许
应用应用模拟前述的基于物理的工具自然现象，特别是水力侵蚀。但是，大多数
现有物理学的交互性侵蚀模拟的方法是有限的，这些算法的时间复杂度是非常高的
只能够允许模拟小规模的现象。

为了解决这个问题，我们已经整合、拓展、并且开发了应用的基于物理学的侵蚀
算法，以互动方式模拟地形。用户使用我们的侵蚀算法改变了地形的形状。一种
对建模过程偶遇很好控制的直观方式。由于我们的实现在交互式GPU上运行帧率的
，我们的工作就是一个交互式的基于物理的使用侵蚀的地形建模。

为了在技术上通过侵蚀来支持地形建模，我们结合了两种水力侵蚀算法:一种通过攻击和
压力的领域为迅速移动的水在类似于【MDH07】的方式，另一种建立在事实上，慢慢
流动的水会侵蚀下面的土壤将其溶解。对于水和土壤匀速我们使用【HW04，0H95】和
最近描述的管道模型在【MFC06】中的GPU上实现。我们的算法模拟多层材料的侵蚀，并
允许模拟侵蚀的次要特征，如断裂、由于重力原因、滑动材料等情况。

该解决方案在GPU上完全实施。解决有限的GPU内存，我们将地划分为多个瓦片（单元），
可以进行独立处理。例如我们可以通过这种方式，将大的翟兴选择一条河流并施加侵蚀
当然仅限于选定的区域中进行。

结果表明我们的交互式侵蚀算法可以用来以受控的放肆创造出合理的地形，从而证明了
基于交互式物理的可行性地形建模与实时反馈。图1显示了我们的结果的一个例子。

我们工作的技术贡献是：①整合三种侵蚀算法。②他们扩栈到分层的地形表示。③现有算法
的适应性，使用管道模型进行水路运输，④对算法执行GPU，⑤选择性侵蚀GPU上的子图块。

二、相关工作

地形建模一直是计算机图形学的主体，自从一开始，首先是纯程序性的模型基于分形，多重
分形以及超文本。主要的这些技术的缺点：有限的用户控制-有已通过侵蚀模拟或者通过改变
本地来解决分形曲面的性质。Kelly等人使用分形插值来连接预定义的山脊和山谷的地形
Prusinkiewicz和Hammel使用用于自适应细分的L系统与河的分形山。一种变形的方法并
描述了将分形地形剪裁成期望的形状。向程序模型的交互性迈出的一步是基于实例的建模
，其中一个地形是从约束产生的，比如2D草图。

与程序性质的方法相反的一方就是交互奇数，通常集成到建模中，作为软件包作为独立应用程序
的提供使用。

存在通过基于物理学来修改地形的解决方案
技术。其中之一是在[MKM89]中引入的。这里
土壤运输通过重力水扩散发生
和热风化。一种基于武力的方法
[CMF98]和最近描述了自来水的侵蚀
在[NWD05]中改进为在交互式帧率下工作
对于小场景。被侵蚀的山谷被模拟了
[Nag97]中的特别解决方案。水力侵蚀被分解
成为一系列独立的步骤（雨水，侵蚀，存款，
在[BF02]中蒸发）。一个完整的三维侵蚀模拟使用
Navier-Stokes方程[BTHB06]可以模拟很宽的范围
各种各样的现象，例如凹面或后退瀑布，
但时间复杂度非常高。景观综合
在[RPP93]中提出了侵蚀和沉积。
Mei等人[MDH07]和安赫等人。 [ASA07]实时实现
GPU上的水力侵蚀。风化算法
对于一般的3D形状，而不是地形，也存在。多尔西
等人。 [DEJP99]模拟风化石的侵蚀;陈
等人。 [CXW *
05]使用γ-ton追踪来模拟生锈和灰尘。
最近Wojtan等人。 [WCMT07]模拟腐蚀和
使用化学方法进行侵蚀。

我们的解决方案使用浅水模拟【MDH07】描述在第四节中
有更加详细的介绍，关于流体的概述在计算机图形学中的
模拟，我们参考【BFMMF06】

三、场景描述

地形可以描述为常规高度场，GIS中使用的遥感数据结构作为数字高程模型。
虽然有效的侵蚀的模拟和渲染，高度字段不支持不同各种材料。相反，我们
的系统使用分层在【BF01】中引入的代表性，其中每个层代表一个不同的
材料和各层的总结以及海拔。这种数据结构可以很容易的创建或者由任何图像
编辑软件修改，此外，适用于GPU实现。图2显示了输入用于图1场景的图像。
图3显示了一个地形暴露其限定层和侵蚀的影响仅将材料添加到最高水平。
每层由具有不同侵蚀能力的材料组成，如溶解特性或者抗水性运动。由于这一
店，我们可以模拟广泛的像石头侵蚀沙子或移动的自然现象，泥土覆盖在较硬的
底层土上。

在模拟过程中可以将图层到处为图像，并将其作为高度字段导入到第三方3D软件包
中进一步建模和渲染。图6和9是使用这种方法在精神射线中呈现。（其他图像如
在第6节所述在GPU上渲染）。

侵蚀和沉积被模拟作为材料交换在最顶层之间。

场景描述的另外一个部分就是水的来源，出水口以及环境属性，例如降雨量和蒸发强度。
所有这些参数可以由用户本地或者权值控制在模拟其间。用户也可以添加和取出材料以及
水。这些交互式功能被延时在随附的视频中。

四、水模拟

我们的系统基本部分就是移动模拟水。几乎所有现有的3D流体动力学
方法【BFMF06】都可以使用，但是，他们通常是提供非交互式的结果
自从我们的终点是大规模的侵蚀，一个号的候选人是浅水模型。
这些最近显着改善并且勇于模拟流过地形的流体，甚至是用于实时水侵蚀
模拟。

对于流体模拟和侵蚀，我们采用静水压力管道模型，离散水体积转成具有
恒定物理性质的垂直柱（图4）；
【Get：我们将之前建模过程中的水域模型也可以修改成一个一个的柱体，因为相邻的两个水体如果相对较近
的话，的确能够模拟出河流的感觉】列举具有恒定的区域并且进行通信与他们的四个邻居通过模拟管道。运用
他们试图稳定静水压力的管道由每个柱子中的不同水位引起的受外力影响。这涉及水量变换，实际上。他们表
现为水位的变化。这种方法本质上死可并行的，因此很好适用于GPU实现【MDH07】；我们提到后边以详细说明。

接下来让我们设定相邻两个坐标之间的偏移量索引是i，j∈{-1,1}；对于点（x，y）和点（x+i，y+j）的静压力
强度是：

![](https://i.loli.net/2018/06/07/5b1898f135844.png)

这里P是流体密度，g是重力加速度。其中h(x,y)的计算方式是：

![](https://i.loli.net/2018/06/07/5b189ddee33f6.png)

其中dk是表示当前点（x，y）每层的高度。w（x，y）表示的是这点水的高度。

虚拟管道试图稳定两端的压力，这导致流体流过的时候会加速的通过这个管道。
这里对于两点之间加速度的计算有：

![](https://i.loli.net/2018/06/07/5b18a06bb1967.png)

这里p仍然是流体密度，l表示的是管道（通道）的长度（两点之间的通道长度），
我们假设l=1；

接下来要在离散的时间∆t中，执行水流动的模拟。假设恒定的加速度在∆t之上
那么我们可以描述管道中的流量为：

![](https://i.loli.net/2018/06/07/5b18a7ee14957.png)

其中C是管道的横截面积。在我们模拟的过程中，这个C是恒定的，设定为了l^2（管道长度的平方，也就是1，l设定为了1）
最终，每个点的水的新高度为：

![](https://i.loli.net/2018/06/07/5b18a9160df55.png)

在模拟过程中，一个点最终结束可能是负水量。面向GPU的解决方案这个问题的【MDH07】是仅仅
计算流量与每个点中的正向速度进行比较。然后我们描述了给定池中水的总输出量。时间步长为∆t
条件下有(流出量的计算公式)：

![](https://i.loli.net/2018/06/07/5b18ad4e3e605.png)

所以当出现了负水量的问题，会通过缩小输出流量来解决问题。给定单源如果总输出量大于当前点中
的水量，那么有：

![](https://i.loli.net/2018/06/07/5b18ade6d450d.png)

边界被视为自由滑动，这意味着
水流速度矢量v总是在方向上设置为零
的边界法向矢量n，使v·n = 0
可以通过克隆水和地形高度的值来实现
从它们的相邻细胞中分离细胞。

五、侵蚀算法

该系统算法建立在三种不同的侵蚀算法上：基于力和溶解的水力侵蚀，
以及直接的物质运输（通过沉积物滑移）。

基于力的水力侵蚀算法基于由地形表面上流水造成的力。该算法首先由【CMF98】引入。
然后由【NWD05】修订，最近实施GPU中的【MDH07】。我们无条件的拓展了这个算法具
又二阶精度的稳定解，称为半拉格朗日MacCormack方法。这种侵蚀算法非常适合模拟
流水如快速河流或者雨水。

基于溶解的水力侵蚀算法受到启发由【Ben07】。关键的观察是，当水溶池或河流的底部，
在水中的风华可以近似为运动一种高度粘稠的流体。这种水力侵蚀模拟慢慢地移动水量，
大多润滑影响池底，也导致银行侵蚀。我们提出了前边工作的两个拓展。首先，【Ben07】
使用不同的水模拟算法【KM90】，而我们整合侵蚀与管道模型。其次，我们介绍一下这个
GPU的实现算法。

热风化【MKM89】是由热量引起的，某些部分材料被变化粉碎的冲击的温度并沉积。当只
考虑经常高度场，这个动作有效地模拟沙子沉降。我们已经适应了这种侵蚀模拟平滑边缘
的土壤滑移效应侵蚀部分的地形。我们可以通过一个崩溃或者突然中断或者缓慢侵蚀。但
是，一旦一块的建筑落入水中就会缓慢溶解，平滑的效果将占据上风。本文的主要贡献之
一是集成几种侵蚀算法以统一的方式在多层上进行数据结构。在下边的文本中我们描述了
个人侵蚀算法的细节。

五.1 基于力量的侵蚀

基于力量的侵蚀算法使用所造成的力量来自水及其对地形的影响（见图5）。我们已经增强
了所描述的奇数在【MDH07】中通过更加精确的沉积物匀速【SFK*07】以及对多层设置的
支持。

关键的观察是移动的水的质量和力量，导致地形粒子松动进入水中，沉淀形式。
我们定义Sm,k(x,y)为沉淀物运输能力值为：

![](https://i.loli.net/2018/06/07/5b18cb2b64df2.png)

其中Ck是沉淀物容量常数，在单独的K层上。α(x, y) 是地形的倾斜角度。V(x,y)是水流速度。
通常使得Ck的值在我们模拟中岩石为0.0001和砂石为0.1。

为了获得速度V（x，y），我们计算的量水在特定的方向上每单位时间通过一根柱子。对于x方向，
水量是：

![](https://i.loli.net/2018/06/07/5b18cc6ae6caa.png)

对于x方向，其流速是：

![](https://i.loli.net/2018/06/07/5b18ccac03731.png)

where
w¯(x, y) = 1
2
[w
t
(x, y) +w
t−∆t
(x, y)]
is the average water height in the column during the last two
steps. The y-component is computed in similar way.








