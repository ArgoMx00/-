一、右键点击u3d菜单创建新的GameObject

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
public class Build_River_ToolEditor : EditorWindow {

    [MenuItem("GameObject/3D Object/Creat RiverTool")]
    static public void CreateRierTool()
    {
        GameObject gameobject = new GameObject("RiverTool");
    }
    //[MenuItem("GameObject/Mycategory/Custom Game Object")]

}
```

二、自定义Inspetor界面，添加网易游戏Logo、外加一句文本框

```c#

using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
//必须要有的东西
[CustomEditor(typeof(Build_River_Tool)), CanEditMultipleObjects]
public class Build_River_ToolEditor : Editor {

    Vector2 scrollPos;
    Texture2D logo;
    [MenuItem("GameObject/3D Object/Creat RiverTool")]
    static public void CreateRierTool()
    {
        GameObject gameobject = new GameObject("RiverTool");
        gameobject.AddComponent<Build_River_Tool>();
        gameobject.AddComponent<MeshFilter>();
        gameobject.AddComponent<MeshRenderer>();
        Selection.activeGameObject = gameobject;
    }
    public override void OnInspectorGUI()
    {
        Debug.Log("yes");
        //进行数据交互前必须调到他的target；
        Build_River_Tool rivertool = (Build_River_Tool)target;

        rivertool.val = EditorGUILayout.TextField("输入文本", rivertool.val);
        rivertool.val2 = EditorGUILayout.TextField("输入文本2", rivertool.val2);
        logo = (Texture2D)Resources.Load("NetEase");
        scrollPos = EditorGUILayout.BeginScrollView(scrollPos);
        {
            GUIContent btnTxt = new GUIContent(logo);

            var rt = GUILayoutUtility.GetRect(btnTxt, GUI.skin.label, GUILayout.ExpandWidth(false));
            rt.center = new Vector2(EditorGUIUtility.currentViewWidth / 2, rt.center.y);

            GUI.Button(rt, btnTxt, GUI.skin.label);

            EditorGUILayout.LabelField("Add Point  - CTRL + Left Mouse Button Click");
            EditorGUI.indentLevel++;
        }
        

        EditorGUILayout.EndScrollView();
    }
}

```
实际效果：

![](https://i.loli.net/2018/06/19/5b28a2a9d8e6c.png)

三、在shaded编辑窗口点击地形点，并且获取到点的信息。

```c#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
//必须要有的东西
[CustomEditor(typeof(Build_River_Tool)), CanEditMultipleObjects]
public class Build_River_ToolEditor : Editor {

    Build_River_Tool rivertool;
    bool showPositions = false;
    Vector2 scrollPos;
    Texture2D logo;
    [MenuItem("GameObject/3D Object/Creat RiverTool")]
    static public void CreateRierTool()
    {
        GameObject gameobject = new GameObject("RiverTool");
        gameobject.AddComponent<Build_River_Tool>();
        gameobject.AddComponent<MeshFilter>();
        gameobject.AddComponent<MeshRenderer>();
        Selection.activeGameObject = gameobject;
    }
    public override void OnInspectorGUI()
    {
        //进行数据交互前必须调到他的target；
        rivertool = (Build_River_Tool)target;

        rivertool.val = EditorGUILayout.TextField("输入文本", rivertool.val);
        rivertool.val2 = EditorGUILayout.TextField("输入文本2", rivertool.val2);
        logo = (Texture2D)Resources.Load("NetEase");
        scrollPos = EditorGUILayout.BeginScrollView(scrollPos);
        {
            GUIContent btnTxt = new GUIContent(logo);
            
            var rt = GUILayoutUtility.GetRect(btnTxt, GUI.skin.label, GUILayout.ExpandWidth(false));

            //设置一个编辑模块
            rt.center = new Vector2(EditorGUIUtility.currentViewWidth / 2, rt.center.y);
            
            GUI.Button(rt, btnTxt, GUI.skin.label);

            EditorGUILayout.LabelField("添加河流点的方式：按住ctrl+鼠标左键");
            EditorGUI.indentLevel++;

            //增加一个点的Folder
            EditorGUILayout.BeginHorizontal();
            showPositions = EditorGUILayout.Foldout(showPositions, "Points");


            //增加点的功能，自动在上一个点的结尾添加一个点
            if (GUILayout.Button("Add point at end"))
            {
                Undo.RecordObject(rivertool, "Add Point");
            }
            EditorGUILayout.EndHorizontal();



        }
        EditorGUILayout.EndScrollView();
    }
    protected virtual void OnSceneGUI()
    {

        int controlId = GUIUtility.GetControlID(FocusType.Passive);

        

            if (Event.current.type == EventType.MouseDown && Event.current.button == 0 && Event.current.control)
            {
                Vector3 screenPosition = Event.current.mousePosition;
                screenPosition.y = Camera.current.pixelHeight - screenPosition.y;
                Ray ray = Camera.current.ScreenPointToRay(screenPosition);
                RaycastHit hit;

                if (Physics.Raycast(ray, out hit))
                {
                    Undo.RecordObject(rivertool, "Add point");

                    Vector4 position = hit.point - rivertool.transform.position;
                    position.w = 1;
                    rivertool.GetPoint(position);

                    GUIUtility.hotControl = controlId;
                    Event.current.Use();
                    HandleUtility.Repaint();
                }
            }
            if (Event.current.type == EventType.MouseUp && Event.current.button == 0 && Event.current.control)
            {
                GUIUtility.hotControl = 0;

            }
        
    }
}


using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Build_River_Tool : MonoBehaviour {

    public string val;
    public string val2;
    public void GetPoint(Vector4 temp)
    {
        print(temp.x + "   " + temp.y + "   " + temp.z);
    }
}

```

实际效果：

![](https://i.loli.net/2018/06/19/5b28be18e4b88.png)


