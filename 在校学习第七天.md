因为能够建立基础的河床（虽然形状和内容比较粗略），又不知道到底什么河床才是真正想要的效果，所以
我尝试今天将存在的问题记录下来之后，考虑做一下水域出来。

一、首先我们整理一下已能完成的功能和时间复杂度，来进一步了解自己所能完成的任务程度。

①首先我们在界面上点选一个点，能够通过脚本之间互通信息将点的信息传递给改变地形的脚本。时间复杂度忽略不计，为常熟级别。

②接下来我们将点选的一部分点排序，并且将路径点凹陷下去，下降一半的河流高度，时间复杂度为O（n^2），因为排序的方式我们暂时
还是保留冒泡排序的方法。

③排序后，将路径点凹陷下去之后，就是凹河床的造型了。我们模仿参考文章所做的方法是每一次选取一个路径点出来，
然后判断这个点和周围一圈的点的坡度，如果过大，那么降低周围的点的高度，以来凹出一个V形河床出来。时间复杂度为O（n*k*a*b）；这里n
表示路径点的个数，k表示最多循环次数，a*b表示周围点的个数。因为凹的造型是一步一步重复循环进行的，所以时间复杂度很差。

④对于上述②和③部分的复杂度，从算法的角度来讲，都是能够优化的。这些我们后期再进行优化。

二、从分析问题

现在我们知道，我们能够通过设定坡度和下降的高度值，以及周围的范围，能够凹出河床的形状。
例如这样设定值的情况（周围的范围设定为40X40）：

![](https://i.loli.net/2018/06/03/5b134bc89a12f.png)

能够凹造出这样的结果：

![](https://i.loli.net/2018/06/03/5b134bdcec540.png)

同第一个图的设定值，我们把周围的范围设定为20X20的话，能够凹出这样的结果：

![](https://i.loli.net/2018/06/03/5b134cabda3b7.png)

不难发现还是有一些问题存在的，比如凹出的造型很死板，很突兀（有棱有角的），不够圆滑，在实际生活中
河流的道路肯定不会跟小峡谷一样。再比如，我们假设想要设定出一个合理大小的河流出来。只能通过不断的
测试和修正坡度、范围以及河流深度来搞定这个问题。

那么基本上所存在的问题也都列举出来了。接下来我们尝试建立水域，开始今天的学习。

三、尝试在地形中添加水，以及优化美观地形。

1.首先我们在Asset Store（https://assetstore.unity.com）
中下载Standard Assets。然后导入所有内容到当前Project里边。

2.我们尝试使用Terrain地形中的贴图功能，对地形进行贴图，效果如下：

![](https://i.loli.net/2018/06/03/5b135b5255dc8.png)

然后我们在这上边建立一个基础地形，效果如下：

![](https://i.loli.net/2018/06/03/5b135e022f67e.png)

3.接下来我们开始建立水域。

Standard Assets中的Water prefab，其实就是一个平面效果（水在一个平面上流动的效果）。
通过拉伸和放置位子，在远处去看这个地形的效果还是蛮不错的：

![](https://i.loli.net/2018/06/03/5b1360684a79d.png)






